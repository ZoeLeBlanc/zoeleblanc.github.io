<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>Zoe Genevieve LeBlanc | Guide to Publishing Humanities Data Analysis</title>
  <meta name="description" content="Zoe LeBlanc, Digital Historian.">

  <link rel="shortcut icon" href="/assets/img/favicon.ico">

  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="canonical" href="/blog/publish-altair/">
</head>

  <!-- Load jQuery -->
<script src="//code.jquery.com/jquery-1.12.4.min.js"></script>

<!-- Load Common JS -->
<script src="/assets/js/common.js"></script>

<!-- Load KaTeX -->
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.js"></script>
<script src="/assets/js/katex.js"></script>




<!-- Include custom icon fonts -->
<link rel="stylesheet" href="/assets/css/font-awesome.min.css">
<link rel="stylesheet" href="/assets/css/academicons.min.css">

<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-XXXXXXXX-X', 'auto');
ga('send', 'pageview');
</script>

  <body>

    <header class="site-header">

  <div class="wrapper">

    
    <span class="site-title">
        
       <a class="page-link" href="/"> <strong>Zoe</strong> LeBlanc </a>
    </span>
    

    <nav class="site-nav">
      <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#424242"
                d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z" />
              <path fill="#424242"
                d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z" />
              <path fill="#424242"
                d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z" />
            </svg>
          </span>
        </label>
      <div class="trigger">
        <!-- About -->
        <a class="page-link" href="/">about</a>

        <!-- Blog -->
        <a class="page-link" href="/blog/">blog</a>

        <!-- Projects -->
        <a class="page-link" href="/projects/">projects</a>

        <!-- teaching -->
        <a class="page-link" href="/teaching/">teaching</a>

        <!-- Pages -->
        <!-- 
          
        
          
        
          
        
          
        
          
        
          
            <a class="page-link" href="/teaching/">teaching</a>
          
        
          
            <a class="page-link" href="/test/">Topic Modeling Experiments</a>
          
        
          
            <a class="page-link" href="/test2/">Topic Modeling Experiments</a>
          
        
          
            <a class="page-link" href="/vis_data/">Topic Modeling Experiments</a>
          
        
          
        
          
        
          
        
          
        
          
        
          
         -->

        <!-- Search -->
        <!--  <a class="page-link" href="/search/"><i class="fa fa-search" aria-hidden="true"></i></a> -->

        <!-- CV link -->
        <!-- <a class="page-link" href="/assets/pdf/CV.pdf">vitae</a> -->

      </div>
    </nav>

  </div>

</header>



    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">Guide to Publishing Humanities Data Analysis</h1>
    <p class="post-meta">June 24, 2021</p>
  </header>

  <article class="post-content">
    <p>Now that you’re undertaking humanities data analysis a natural question is how to present and make your analyses accessible and publicly available. This is a BIG question with many answers depending on your tools, audiences, and timelines. However, for the sake of your final projects, I wanted to cover some of the options you might pursue to present your work.</p>

<p>First though let’s refresh on how the web works.</p>

<hr />

<h2 id="what-is-the-web">What is the Web?</h2>

<p><a href="https://en.wikipedia.org/wiki/World_Wide_Web"><strong>From Wikipedia:</strong></a>
“The World Wide Web (WWW), commonly known as the Web, is an information system where documents and other web resources are identified by Uniform Resource Locators (URLs, such as https://www.example.com/), which may be interlinked by hypertext, and are accessible over the Internet.[1][2] The resources of the WWW are transferred via the Hypertext Transfer Protocol (HTTP) and may be accessed by users by a software application called a web browser and are published by a software application called a web server.”</p>

<p><img src="https://2.bp.blogspot.com/_4l9wMe5bbSk/TMpvwVcMT3I/AAAAAAAAAK4/sCEjRQCkF1o/s1600/Client+Server+communication.GIF" alt="http" /></p>

<p><em>What does this mean exactly?</em></p>

<p>When we type a url for a webpage (say google.com), we’re actually sending an <strong>HTTP request</strong> to a <strong>server</strong> that hosts the actual HTML files and data. If the server decides that our request is ok (200), then it will give us access to the webpage.</p>

<p><img src="https://d210waafu5nnsw.cloudfront.net/fad1ff76-801d-4adb-be70-9ddfacfeda88/images/u4ccf6dfb1090_original_opt.jpeg" alt="404 page" /></p>

<p>If you’ve ever seen an error message when you go to a webpage saying the page doesn’t exist, that means that you received a 404 error, which is a type of status code you get back from an HTTP request.</p>

<p><em>So what does this mean for publishing on the web?</em></p>

<p>To publish humanities data analysis requires having your files <strong>hosted</strong> on a server that are accessible by <strong>url</strong> - essentially you need a website.</p>

<p>Most DH projects are hosted from Github, which is a service that allows you to host files and keep versions of those files (this is what I use for the course website.)</p>

<p>If you decide you want to setup your own website, I would recommend following this tutorial on creating <a href="https://pages.github.com/">Github websites</a> and this book on using <a href="https://shane-et-al.github.io/git_slab/#git-and-github">git for DH projects</a>.</p>

<hr />
<h2 id="publishing-jupyter-notebooks">Publishing Jupyter Notebooks</h2>

<p>One of the easiest ways to publish your data analysis is to simply publish a Jupyter notebook. There’s a few ways you can go about publishing these depending on whether you want to embed the notebook in a website or simply have an accessible link.</p>

<ol>
  <li>The simplest option is to upload your Jupyter notebook to <strong>Google Colab</strong> <a href="https://colab.research.google.com/notebooks/intro.ipynb#recent=true">https://colab.research.google.com/notebooks/intro.ipynb#recent=true</a> and <a href="https://colab.research.google.com/notebooks/welcome.ipynb">https://colab.research.google.com/notebooks/welcome.ipynb</a>. You can run your entire notebook in the Google Colab environment and even do your analysis there instead of running it locally.</li>
  <li>You can also use <strong>Binder</strong> <a href="https://mybinder.org/">https://mybinder.org/</a> and <a href="https://mybinder.readthedocs.io/en/latest/introduction.html">https://mybinder.readthedocs.io/en/latest/introduction.html</a> to host notebooks that you have in a Github repository.</li>
  <li>Lastly, you can convert a Jupyter notebook to HTML <a href="https://reproducible-science-curriculum.github.io/publication-RR-Jupyter/02-exporting_the_notebook/index.html">https://reproducible-science-curriculum.github.io/publication-RR-Jupyter/02-exporting_the_notebook/index.html</a> either in the terminal or through the web interface. You’ll still need to host your html page, but this can be useful if you have a website and want to have the notebook as a page on the site.</li>
</ol>

<p>One concern with using Altair and Jupyter notebooks is that it tends to make the file very large since it loads the data into the notebook. The size of file can be a problem for Github, so if you are ending with very large files, check out these instructions from Altair’s documentation <a href="https://altair-viz.github.io/user_guide/faq.html#why-does-altair-lead-to-such-extremely-large-notebooks">https://altair-viz.github.io/user_guide/faq.html#why-does-altair-lead-to-such-extremely-large-notebooks</a></p>

<hr />
<h2 id="publishing-altair-charts">Publishing Altair Charts</h2>

<p>While publishing Jupyter notebooks might be an easier solution, often times you’ll want a different reading experience than the cell format of a notebook. In that case, you can save your Altair charts and embed them on your website.</p>

<p>For general guidelines on saving Altair charts, check out the documentation here <a href="https://altair-viz.github.io/user_guide/faq.html#why-does-altair-lead-to-such-extremely-large-notebooks">https://altair-viz.github.io/user_guide/saving_charts.html</a></p>

<ol>
  <li>You can save your Altair chart directly to html with the <code class="language-plaintext highlighter-rouge">chart.save('chart.html')</code> syntax. You’ll still need to host this html page on a website, but now you only have the chart rather than the entire notebook.</li>
  <li>The other option is to download the compiled JSON of the chart and embed it using JavaScript.</li>
</ol>

<p>You have the option to download the compiled json from your chart by clicking the <code class="language-plaintext highlighter-rouge">Open in Vega Editor</code>.</p>

<div class="row" style="justify-content:center;">
   <div>
       <img src="/assets/img/click.png" alt="Click Buttons on Altair Graph" style="max-width:100%;" />
   </div>
</div>

<p>This will open a new window with the full Vega schema. You can select the export option, which will allow you to download the JSON (you can select either compiled or vega-lite).</p>

<div class="row" style="justify-content:center;">
   <div>
       <img src="/assets/img/export.png" alt="Exporting Altair" style="max-width:100%;" />
   </div>
</div>

<p>The next step is to import this compiled json into your webpage.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>Embedding Vega-Lite<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://cdn.jsdelivr.net/npm/vega@5.10.1"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://cdn.jsdelivr.net/npm/vega-lite@4.10.4"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://cdn.jsdelivr.net/npm/vega-embed@6.5.2"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"vis"</span><span class="nt">&gt;&lt;/div&gt;</span>

    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
      <span class="kd">var</span> <span class="nx">yourVlSpec</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">$schema</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://vega.github.io/schema/vega-lite/v2.0.json</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">description</span><span class="p">:</span> <span class="dl">'</span><span class="s1">A simple bar chart with embedded data.</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">values</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span><span class="na">a</span><span class="p">:</span> <span class="dl">'</span><span class="s1">A</span><span class="dl">'</span><span class="p">,</span> <span class="na">b</span><span class="p">:</span> <span class="mi">28</span><span class="p">},</span>
            <span class="p">{</span><span class="na">a</span><span class="p">:</span> <span class="dl">'</span><span class="s1">B</span><span class="dl">'</span><span class="p">,</span> <span class="na">b</span><span class="p">:</span> <span class="mi">55</span><span class="p">},</span>
            <span class="p">{</span><span class="na">a</span><span class="p">:</span> <span class="dl">'</span><span class="s1">C</span><span class="dl">'</span><span class="p">,</span> <span class="na">b</span><span class="p">:</span> <span class="mi">43</span><span class="p">},</span>
            <span class="p">{</span><span class="na">a</span><span class="p">:</span> <span class="dl">'</span><span class="s1">D</span><span class="dl">'</span><span class="p">,</span> <span class="na">b</span><span class="p">:</span> <span class="mi">91</span><span class="p">},</span>
            <span class="p">{</span><span class="na">a</span><span class="p">:</span> <span class="dl">'</span><span class="s1">E</span><span class="dl">'</span><span class="p">,</span> <span class="na">b</span><span class="p">:</span> <span class="mi">81</span><span class="p">},</span>
            <span class="p">{</span><span class="na">a</span><span class="p">:</span> <span class="dl">'</span><span class="s1">F</span><span class="dl">'</span><span class="p">,</span> <span class="na">b</span><span class="p">:</span> <span class="mi">53</span><span class="p">},</span>
            <span class="p">{</span><span class="na">a</span><span class="p">:</span> <span class="dl">'</span><span class="s1">G</span><span class="dl">'</span><span class="p">,</span> <span class="na">b</span><span class="p">:</span> <span class="mi">19</span><span class="p">},</span>
            <span class="p">{</span><span class="na">a</span><span class="p">:</span> <span class="dl">'</span><span class="s1">H</span><span class="dl">'</span><span class="p">,</span> <span class="na">b</span><span class="p">:</span> <span class="mi">87</span><span class="p">},</span>
            <span class="p">{</span><span class="na">a</span><span class="p">:</span> <span class="dl">'</span><span class="s1">I</span><span class="dl">'</span><span class="p">,</span> <span class="na">b</span><span class="p">:</span> <span class="mi">52</span><span class="p">}</span>
          <span class="p">]</span>
        <span class="p">},</span>
        <span class="na">mark</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bar</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">encoding</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">x</span><span class="p">:</span> <span class="p">{</span><span class="na">field</span><span class="p">:</span> <span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">,</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">ordinal</span><span class="dl">'</span><span class="p">},</span>
          <span class="na">y</span><span class="p">:</span> <span class="p">{</span><span class="na">field</span><span class="p">:</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">,</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">quantitative</span><span class="dl">'</span><span class="p">}</span>
        <span class="p">}</span>
      <span class="p">};</span>
      <span class="nx">vegaEmbed</span><span class="p">(</span><span class="dl">'</span><span class="s1">#vis</span><span class="dl">'</span><span class="p">,</span> <span class="nx">yourVlSpec</span><span class="p">);</span>
    <span class="nt">&lt;/script&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>
<p>In this example from the Vega docs, <code class="language-plaintext highlighter-rouge">yourV1spec</code> is our compiled chart.</p>

<p>So for our purposes we would have the following:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>Embedding Vega-Lite<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://cdn.jsdelivr.net/npm/vega@5.10.1"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://cdn.jsdelivr.net/npm/vega-lite@4.10.4"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://cdn.jsdelivr.net/npm/vega-embed@6.5.2"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"vis"</span><span class="nt">&gt;&lt;/div&gt;</span>

    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
      <span class="kd">var</span> <span class="nx">yourVlSpec</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/visualization.vl.json</span><span class="dl">"</span><span class="p">;</span>
      <span class="nx">vegaEmbed</span><span class="p">(</span><span class="dl">'</span><span class="s1">#vis</span><span class="dl">'</span><span class="p">,</span> <span class="nx">yourVlSpec</span><span class="p">);</span>
    <span class="nt">&lt;/script&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>
<p>Obviously we haven’t covered much about HTML and haven’t discussed at all JavaScript, but you might recognize some of the syntax inherently.</p>

<p>Our <code class="language-plaintext highlighter-rouge">script</code> tags at the beginning of our webpage are importing the required libraries (just like our <code class="language-plaintext highlighter-rouge">import</code> statements).</p>

<p>In our last <code class="language-plaintext highlighter-rouge">script</code> tag, we’re writing our code. First we are assigning a variable called <code class="language-plaintext highlighter-rouge">yourVlSpec</code> and passing it a string that contains the path to our compiled chart. Then we pass that variable to the class of <code class="language-plaintext highlighter-rouge">vegaEmbed</code>.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// More argument info at https://github.com/vega/vega-embed
vegaEmbed('#vis', yourVlSpec);
</code></pre></div></div>
<p>This class takes two arguments. The first is where we want the chart displayed (in this case a <code class="language-plaintext highlighter-rouge">div</code> with the <code class="language-plaintext highlighter-rouge">id</code> of <code class="language-plaintext highlighter-rouge">vis</code>). Then the second argument is the variable with the compiled chart.</p>

<p>The benefit of this approach let’s you include other materials on your webpage, like additional text and images, as well as allowing different layouts.</p>

<p>However, using this approach also requires quite a bit of additional work so you may want to start with publishing your notebooks before you start building an actual website.</p>

<p>And finally here’s a live example!</p>

<script src="https://cdn.jsdelivr.net/npm/vega@5.7.2"></script>

<script src="https://cdn.jsdelivr.net/npm/vega-lite@4.0.0-beta.10"></script>

<script src="https://cdn.jsdelivr.net/npm/vega-embed@5.1.3"></script>

<div id="viz" class="col three"></div>
<script type="text/javascript">
    // Visualization javascript
    var viz = "/example_visualization.vl.json";
    vegaEmbed('#viz', viz);
</script>


  </article>

  

</div>

      </div>
    </div>

    <footer>

  <div class="wrapper">
    &copy; Copyright 2021 Zoe Genevieve LeBlanc 😄 🍁 ☕.
    Powered by <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank">GitHub Pages</a>.
    
        Last updated: <span id="modified-date"></span>
    
  </div>

</footer>
<script>
  (function () {
    var githubAPI = "https://api.github.com/repos/ZoeLeBlanc/zoeleblanc.github.io/commits";
    $.getJSON(githubAPI, {
        path: "_posts/2021-06-24-publish-altair.md"
      })
      .done(function (data) {
        var date = new Date(data[0].commit.author.date);
        var options = { day: 'numeric', month: 'long', year: 'numeric'};
        var formatted_date = new Intl.DateTimeFormat('en-US', options).format(date);
        $("#modified-date").text(formatted_date);
      });
  })();
</script>

  </body>

</html>
